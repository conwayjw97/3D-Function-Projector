{"version":3,"sources":["components/canvas/utils/Graphics.js","components/canvas/Canvas.js","components/controls/Controls.js","App.js","index.js"],"names":["white","green","blue","red","rightBottomBack","THREE","leftTopBack","leftBottomBack","leftBottomFront","Graphics","canvas","width","height","expression","detail","ranges","renderingMethod","this","xRange","parseInt","yRange","zRange","scene","camera","position","set","renderer","antialias","setSize","setClearColor","controls","OrbitControls","domElement","target","renderAxes","renderExpression","animate","requestAnimationFrame","render","update","remove","expressionGroup","renderLine","color","renderText","startVec","endVec","material","linePoints","lineGeometry","setFromPoints","line","add","string","x","y","z","text","SpriteText","fontFace","expPoints","evaluateExpression","i","createAxisUnit","rangeScale","createExpressionDots","length","expSquares","createExpressionSquare","expPlanes","createExpressionPlane","n","nRangeMin","nRangeMax","outRangeMin","outRangeMax","xPoints","step","includes","xEval","replaceAll","yPoints","zEval","yEval","evaluate","xPos","yPos","zPos","push","points","concat","apply","geometry","size","undefined","isWholeSquare","isClosingTriangle","isClosingLine","firstTriangleValid","secondTriangleValid","downardsTriangleValid","downardsTriangleNeeded","planeGeometry","planePointsBottomTriangle","BufferGeometryUtils","mergeBufferGeometries","planePointsTopTriangle","planePointsDownardsTriangle","colour","getColourForY","side","vector","Math","round","abs","Canvas","props","useRef","window","innerWidth","innerHeight","graphicsControls","useEffect","graphics","current","updateProjection","renderingFeatures","updateCount","ref","className","Controls","isOpen","disableAutoFocus","type","id","style","marginLeft","value","onChange","handleExpressionChange","handleRangeChange","padding","onClick","handleUpdate","name","min","max","handleDetailChange","handleRenderingMethodChange","selected","App","useState","setUpdateCount","setDetail","setExpression","setRanges","setRenderingMethod","event","newRanges","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.787d6d81.chunk.js","sourcesContent":["import * as THREE from \"three\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { BufferGeometryUtils } from \"three/examples/jsm/utils/BufferGeometryUtils.js\";\r\n\r\nimport SpriteText from 'three-spritetext';\r\n\r\nimport { evaluate } from 'mathjs'\r\n\r\nconst black = \"rgb(40, 44, 52)\";\r\nconst white = \"rgb(255, 255, 255)\";\r\nconst green = \"rgb(0, 255, 0)\";\r\nconst blue = \"rgb(0, 0, 255)\";\r\nconst red = \"rgb(255, 0, 43)\";\r\n\r\nconst rightBottomBack = new THREE.Vector3(100, -100, -100);\r\nconst leftTopBack = new THREE.Vector3(-100, 100, -100);\r\nconst leftBottomBack = new THREE.Vector3(-100, -100, -100);\r\nconst leftBottomFront = new THREE.Vector3(-100, -100, 100);\r\n\r\nexport default class Graphics{\r\n  constructor(canvas, width, height, expression, detail, ranges, renderingMethod){\r\n    this.expression = expression;\r\n    this.detail = detail;\r\n    this.xRange = [parseInt(ranges[0][0]), parseInt(ranges[0][1])];\r\n    this.yRange = [parseInt(ranges[1][0]), parseInt(ranges[1][1])];\r\n    this.zRange = [parseInt(ranges[2][0]), parseInt(ranges[2][1])];\r\n    this.renderingMethod = renderingMethod;\r\n\r\n    this.scene = new THREE.Scene();\r\n    this.camera = new THREE.PerspectiveCamera(45, width/height, 0.1, 1000);\r\n    this.camera.position.set(150, 100, 150);\r\n\r\n    this.renderer = new THREE.WebGLRenderer({canvas: canvas, antialias: true});\r\n    this.renderer.setSize(width, height);\r\n    this.renderer.setClearColor(black);\r\n\r\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n    this.controls.target = new THREE.Vector3(0, 0, 0);\r\n\r\n    this.renderAxes();\r\n    this.renderExpression();\r\n\r\n    const animate = () => {\r\n    \trequestAnimationFrame(animate);\r\n    \tthis.renderer.render(this.scene, this.camera);\r\n      this.controls.update();\r\n    }\r\n\r\n    animate();\r\n  }\r\n\r\n  updateProjection(expression, detail, ranges, renderingMethod){\r\n    if(this.expression !== expression || this.detail !== detail || this.ranges !== ranges || this.renderingMethod !== renderingMethod){\r\n      this.expression = expression;\r\n      this.detail = detail;\r\n      this.xRange = [parseInt(ranges[0][0]), parseInt(ranges[0][1])];\r\n      this.yRange = [parseInt(ranges[1][0]), parseInt(ranges[1][1])];\r\n      this.zRange = [parseInt(ranges[2][0]), parseInt(ranges[2][1])];\r\n      this.renderingMethod = renderingMethod;\r\n      this.scene.remove(this.expressionGroup);\r\n      this.renderExpression();\r\n    }\r\n  }\r\n\r\n  renderAxes(){\r\n    this.renderLine(leftBottomBack, rightBottomBack, new THREE.LineBasicMaterial({color: green}));\r\n    this.renderLine(leftBottomBack, leftBottomFront, new THREE.LineBasicMaterial({color: blue}));\r\n    this.renderLine(leftBottomBack, leftTopBack, new THREE.LineBasicMaterial({color: red}));\r\n\r\n    this.renderText(\"X\", 102.5, -100, -100, green);\r\n    this.renderText(\"Y\", -100, -100, 102.5, blue);\r\n    this.renderText(\"Z\", -100, 102.5, -100, red);\r\n  }\r\n\r\n  renderLine(startVec, endVec, material){\r\n    const linePoints = [startVec, endVec];\r\n    const lineGeometry = new THREE.BufferGeometry().setFromPoints(linePoints);\r\n    const line = new THREE.Line(lineGeometry, material);\r\n    this.scene.add(line);\r\n  }\r\n\r\n  renderText(string, x, y, z, color){\r\n    const text = new SpriteText(string, 6, color);\r\n    text.position.x = x;\r\n    text.position.y = y;\r\n    text.position.z = z;\r\n    text.fontFace = \"Consolas\";\r\n    this.scene.add(text);\r\n  }\r\n\r\n  renderExpression(){\r\n    const expPoints = this.evaluateExpression();\r\n\r\n    this.expressionGroup = new THREE.Group();\r\n\r\n    for(let i=-80; i<100; i+=20){\r\n      this.expressionGroup.add(this.createAxisUnit(this.rangeScale(i, -100, 100, this.xRange[0], this.xRange[1]), i, -105, -105, green));\r\n      this.expressionGroup.add(this.createAxisUnit(this.rangeScale(i, -100, 100, this.yRange[0], this.yRange[1]), -105, -105, i, blue));\r\n      this.expressionGroup.add(this.createAxisUnit(this.rangeScale(i, -100, 100, this.zRange[0], this.zRange[1]), -105, i, -105, red));\r\n    }\r\n\r\n    if(this.renderingMethod[\"points\"]){\r\n      this.expressionGroup.add(this.createExpressionDots(expPoints));\r\n    }\r\n\r\n    for(let x=0; x<expPoints.length; x++){\r\n      for(let y=0; y<expPoints[x].length; y++){\r\n        if(this.renderingMethod[\"squares\"]){\r\n          const expSquares = this.createExpressionSquare(expPoints, x, y);\r\n          if(expSquares != null){\r\n            this.expressionGroup.add(expSquares);\r\n          }\r\n        }\r\n        if(this.renderingMethod[\"planes\"]){\r\n          const expPlanes = this.createExpressionPlane(expPoints, x, y)\r\n          if(expPlanes != null){\r\n            this.expressionGroup.add(expPlanes);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.scene.add(this.expressionGroup);\r\n  }\r\n\r\n  rangeScale(n, nRangeMin, nRangeMax, outRangeMin, outRangeMax){\r\n    return (n - nRangeMin) * (outRangeMax - outRangeMin) / (nRangeMax - nRangeMin) + outRangeMin;\r\n  }\r\n\r\n  evaluateExpression(){\r\n    let xPoints = [];\r\n    const step = (this.xRange[1]-this.xRange[0])/this.detail;\r\n    if(this.expression.includes(\"x\") || this.expression.includes(\"y\")){\r\n      for(let x=this.xRange[0]; x<=this.xRange[1]; x+=step){\r\n        let xEval = this.expression.replaceAll(\"x\", \"(\"+x+\")\");\r\n        let yPoints = [];\r\n        for(let y=this.yRange[0]; y<=this.yRange[1]; y+=step){\r\n          let zEval;\r\n          if(xEval.includes(\"y\")){\r\n            let yEval = xEval.replaceAll(\"y\", \"(\"+y+\")\");\r\n            zEval = evaluate(yEval);\r\n          }\r\n          else{\r\n            zEval = evaluate(xEval);\r\n          }\r\n          if(zEval>=this.zRange[0] && zEval<=this.zRange[1]){\r\n            const xPos = this.rangeScale(x, this.xRange[0], this.xRange[1], -100, 100);\r\n            const yPos = this.rangeScale(zEval, this.zRange[0], this.zRange[1], -100, 100);\r\n            const zPos = this.rangeScale(y, this.yRange[0], this.yRange[1], -100, 100);\r\n            yPoints.push(new THREE.Vector3(xPos, yPos, zPos));\r\n          }\r\n        }\r\n        if(yPoints.length > 0){\r\n          xPoints.push(yPoints);\r\n        }\r\n      }\r\n    }\r\n    return xPoints;\r\n  }\r\n\r\n  createAxisUnit(string, x, y, z, color){\r\n    const text = new SpriteText(string, 4, color);\r\n    text.position.x = x;\r\n    text.position.y = y;\r\n    text.position.z = z;\r\n    text.fontFace = \"Consolas\";\r\n    return text;\r\n  }\r\n\r\n  createExpressionDots(expPoints){\r\n    const points = [].concat.apply([], expPoints);\r\n    const geometry = new THREE.BufferGeometry().setFromPoints(points);\r\n    const material = new THREE.PointsMaterial({color: white, size: 0.25});\r\n    return new THREE.Points(geometry, material);\r\n  }\r\n\r\n  createExpressionSquare(expPoints, x, y){\r\n    const isValidPoint = expPoints[x+1] !== undefined;\r\n\r\n    if(isValidPoint){\r\n      const material = new THREE.LineBasicMaterial({color: white});\r\n\r\n      const isWholeSquare = expPoints[x+1][y] !== undefined && expPoints[x+1][y] !== undefined && expPoints[x+1][y+1] !== undefined && expPoints[x][y+1] !== undefined;\r\n      const isClosingTriangle = expPoints[x+1][y] !== undefined && expPoints[x+1][y+1] !== undefined;\r\n      const isClosingLine = expPoints[x][y+1] !== undefined && expPoints[x+1][y] !== undefined;\r\n\r\n      let points = null;\r\n      if(isWholeSquare){\r\n        points = [expPoints[x][y], expPoints[x+1][y], expPoints[x+1][y+1], expPoints[x][y+1], expPoints[x][y]];\r\n      }\r\n      else if(isClosingTriangle){\r\n        points = [expPoints[x][y], expPoints[x+1][y], expPoints[x+1][y+1], expPoints[x][y]];\r\n      }\r\n      else if(isClosingLine){\r\n        points = [expPoints[x][y], expPoints[x][y+1], expPoints[x+1][y]];\r\n      }\r\n\r\n      if(points !== null){\r\n        const geometry = new THREE.BufferGeometry().setFromPoints(points);\r\n        return new THREE.Line(geometry, material);\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  createExpressionPlane(expPoints, x, y){\r\n    const isValidPoint = expPoints[x+1] !== undefined;\r\n\r\n    if(isValidPoint){\r\n      const firstTriangleValid = expPoints[x+1][y] !== undefined && expPoints[x+1][y+1] !== undefined;\r\n      const secondTriangleValid = expPoints[x][y+1] !== undefined && expPoints[x+1][y+1] !== undefined;\r\n      const downardsTriangleValid = expPoints[x][y+1] !== undefined && expPoints[x+1][y] !== undefined;\r\n\r\n      let downardsTriangleNeeded = true;\r\n      let planeGeometry = new THREE.BufferGeometry().setFromPoints([]);\r\n      if(firstTriangleValid){\r\n        downardsTriangleNeeded = false;\r\n        const planePointsBottomTriangle = [expPoints[x][y], expPoints[x+1][y], expPoints[x+1][y+1]];\r\n        planeGeometry = BufferGeometryUtils.mergeBufferGeometries([planeGeometry, new THREE.BufferGeometry().setFromPoints(planePointsBottomTriangle)]);\r\n      }\r\n      if(secondTriangleValid){\r\n        downardsTriangleNeeded = false;\r\n        const planePointsTopTriangle = [expPoints[x][y], expPoints[x][y+1], expPoints[x+1][y+1]];\r\n        planeGeometry = BufferGeometryUtils.mergeBufferGeometries([planeGeometry, new THREE.BufferGeometry().setFromPoints(planePointsTopTriangle)]);\r\n      }\r\n      if(downardsTriangleNeeded && downardsTriangleValid){\r\n        const planePointsDownardsTriangle = [expPoints[x][y], expPoints[x][y+1], expPoints[x+1][y]];\r\n        planeGeometry = BufferGeometryUtils.mergeBufferGeometries([planeGeometry, new THREE.BufferGeometry().setFromPoints(planePointsDownardsTriangle)]);\r\n      }\r\n\r\n      let colour = null;\r\n      if(expPoints[x+1][y+1] !== undefined){\r\n        colour = this.getColourForY(expPoints[x][y].y + (expPoints[x+1][y+1].y - expPoints[x][y].y)/2);\r\n      }\r\n      else{\r\n        colour = this.getColourForY(expPoints[x][y].y);\r\n      }\r\n      const material = new THREE.MeshBasicMaterial({color: colour, side: THREE.DoubleSide});\r\n\r\n      return new THREE.Mesh(planeGeometry, material);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  getColourForVector(vector){\r\n    let red, green, blue;\r\n    red = green = blue = 0;\r\n    red = Math.round(Math.abs(vector.z) * (255/100));\r\n    blue = Math.round(Math.abs(vector.y) * (255/100));\r\n    green = Math.round(Math.abs(vector.x) * (255/100));\r\n    return \"rgb(\"+red+\",\"+green+\",\"+blue+\")\";\r\n  }\r\n\r\n  getColourForY(y){\r\n    let red, green, blue;\r\n    red = green = blue = 0;\r\n    if(y>0){\r\n      red = Math.round(y * (255/100));\r\n      green = Math.round(255 - red);\r\n    }\r\n    else{\r\n      blue = Math.round(-y * (255/100));\r\n      green = Math.round(255 - blue);\r\n    }\r\n    return \"rgb(\"+red+\",\"+green+\",\"+blue+\")\";\r\n  }\r\n}\r\n","// https://observablehq.com/@kelleyvanevert/projection-of-3d-models-using-javascript-and-html5-canvas\r\n// https://academo.org/demos/3d-surface-plotter/\r\n// https://www.benjoffe.com/code/tools/functions3d/examples\r\n// https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene\r\n// https://threejsfundamentals.org/threejs/lessons/threejs-custom-geometry.html\r\n// https://codepen.io/WebSeed/pen/ZmXxKz\r\n\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport Graphics from \"./utils/Graphics.js\"\r\nimport \"./Canvas.css\";\r\n\r\nfunction Canvas(props) {\r\n  const canvas = useRef(null);\r\n  const width = window.innerWidth;\r\n  const height = window.innerHeight;\r\n  const graphicsControls = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const graphics = new Graphics(canvas.current, width, height, props.expression, props.detail, props.ranges, props.renderingMethod);\r\n\r\n    const updateProjection = (expression, detail, ranges, renderingFeatures) => {\r\n      graphics.updateProjection(expression, detail, ranges, renderingFeatures);\r\n    }\r\n\r\n    graphicsControls.current = {updateProjection};\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    graphicsControls.current.updateProjection(props.expression, props.detail, props.ranges, props.renderingMethod);\r\n  }, [props.detail, props.renderingMethod, props.updateCount]);\r\n\r\n  return (\r\n    <canvas ref={canvas} width={width} height={height} className=\"canvas\">\r\n      <p>Your browser doesn't support canvas.</p>\r\n    </canvas>\r\n  );\r\n}\r\n\r\nexport default Canvas;\r\n","import React from \"react\";\r\nimport { slide as Menu } from 'react-burger-menu';\r\nimport \"./Controls.css\";\r\n\r\n// TODO: Clean this up\r\nfunction Controls(props) {\r\n  return (\r\n    <Menu isOpen disableAutoFocus width={375}>\r\n      <label className=\"centered large-print\">\r\n          Projection\r\n      </label>\r\n      <label className=\"centered\">\r\n          Z =\r\n          <input type=\"text\" id=\"expression\" style={{marginLeft: \"0.25em\"}} value={props.expression} onChange={props.handleExpressionChange} />\r\n      </label>\r\n      <label className=\"centered\">\r\n        X Range: [\r\n        <input type=\"text\" id=\"lowerXRange\" value={props.ranges[0][0]} onChange={props.handleRangeChange} style={{width: \"2.5em\"}} />\r\n        ,\r\n        <input type=\"text\" id=\"upperXRange\" value={props.ranges[0][1]} onChange={props.handleRangeChange} style={{width: \"2.5em\"}} />\r\n        ]\r\n      </label>\r\n      <label className=\"centered\">\r\n        Y Range: [\r\n        <input type=\"text\" id=\"lowerYRange\" value={props.ranges[1][0]} onChange={props.handleRangeChange} style={{width: \"2.5em\"}} />\r\n        ,\r\n        <input type=\"text\" id=\"upperYRange\" value={props.ranges[1][1]} onChange={props.handleRangeChange} style={{width: \"2.5em\"}} />\r\n        ]\r\n      </label>\r\n      <label className=\"centered\">\r\n        Z Range: [\r\n        <input type=\"text\" id=\"lowerZRange\" value={props.ranges[2][0]} onChange={props.handleRangeChange} style={{width: \"2.5em\"}} />\r\n        ,\r\n        <input type=\"text\" id=\"upperZRange\" value={props.ranges[2][1]} onChange={props.handleRangeChange} style={{width: \"2.5em\"}} />\r\n        ]\r\n      </label>\r\n      <label className=\"centered large-print underlined\" style={{padding: \"1em 0\"}}>\r\n          <button onClick={props.handleUpdate}>Update</button>\r\n      </label>\r\n\r\n      <label className=\"centered large-print\">\r\n          Graphics\r\n      </label>\r\n      <label className=\"centered\" style={{padding: \"1em 0\"}}>\r\n        Detail:\r\n        <input type=\"range\" id=\"detail\" name=\"detail\" min=\"10\" max=\"100\" value={props.detail} onChange={props.handleDetailChange} />\r\n      </label>\r\n\r\n      <label className=\"centered underlined\" style={{padding: \"1em 0\"}}>\r\n          Render Method:\r\n          <select id=\"angle-value-dropdown\" style={{marginLeft: \"0.25em\"}} onChange={props.handleRenderingMethodChange}>\r\n            <option value=\"vertices\">Vertices</option>\r\n            <option value=\"edges\">Edges</option>\r\n            <option selected value=\"faces\">Faces</option>\r\n          </select>\r\n      </label>\r\n\r\n      <label className=\"centered large-print\">\r\n          Camera Instructions\r\n      </label>\r\n      <label className=\"centered underlined\" style={{padding: \"1em 0\"}}>\r\n        Left click and hold to rotate the camera around the projection.\r\n        Right click and hold to move the camera sideways.\r\n        Scroll to move the camera forwards or backwards.\r\n      </label>\r\n    </Menu>\r\n  );\r\n}\r\n\r\nexport default Controls;\r\n","import { useState } from 'react';\r\nimport Canvas from './components/canvas/Canvas.js';\r\nimport Controls from './components/controls/Controls.js';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  const [updateCount, setUpdateCount] = useState(0);\r\n  const [detail, setDetail] = useState(50);\r\n  const [expression, setExpression] = useState(\"x^2+y^2\");\r\n  const [ranges, setRanges] = useState([[\"-100\", \"100\"], [\"-100\", \"100\"], [\"0\", \"20000\"]]);\r\n  const [renderingMethod, setRenderingMethod] = useState({\"points\":false, \"squares\":false, \"planes\":true});\r\n\r\n  const handleDetailChange = (event) => {\r\n    setDetail(event.target.value);\r\n  }\r\n\r\n  const handleExpressionChange = (event) => {\r\n    setExpression(event.target.value);\r\n  }\r\n\r\n  const handleRangeChange = (event) => {\r\n    const newRanges = [...ranges];\r\n    switch(event.target.id){\r\n      case \"lowerXRange\":\r\n        newRanges[0][0] = event.target.value;\r\n        break;\r\n      case \"upperXRange\":\r\n        newRanges[0][1] = event.target.value;\r\n        break;\r\n      case \"lowerYRange\":\r\n        newRanges[1][0] = event.target.value;\r\n        break;\r\n      case \"upperYRange\":\r\n        newRanges[1][1] = event.target.value;\r\n        break;\r\n      case \"lowerZRange\":\r\n        newRanges[2][0] = event.target.value;\r\n        break;\r\n      case \"upperZRange\":\r\n        newRanges[2][1] = event.target.value;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    setRanges(newRanges);\r\n  }\r\n\r\n  const handleRenderingMethodChange = (event) => {\r\n    switch(event.target.value){\r\n      case \"vertices\":\r\n        setRenderingMethod({\"points\":true, \"squares\":false, \"planes\":false});\r\n        break;\r\n      case \"edges\":\r\n        setRenderingMethod({\"points\":false, \"squares\":true, \"planes\":false});\r\n        break;\r\n      case \"faces\":\r\n        setRenderingMethod({\"points\":false, \"squares\":false, \"planes\":true});\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  const handleUpdate = () => {\r\n    setUpdateCount(updateCount + 1);\r\n  }\r\n\r\n  // TODO: Make a reducer for all these states\r\n  return (\r\n    <div className=\"App\">\r\n      <Canvas\r\n        detail={detail}\r\n        expression={expression}\r\n        ranges={ranges}\r\n        renderingMethod={renderingMethod}\r\n        updateCount={updateCount}\r\n      />\r\n      <Controls\r\n        detail={detail}\r\n        handleDetailChange={handleDetailChange}\r\n        expression={expression}\r\n        handleExpressionChange={handleExpressionChange}\r\n        ranges={ranges}\r\n        handleRangeChange={handleRangeChange}\r\n        handleRenderingMethodChange={handleRenderingMethodChange}\r\n        handleUpdate={handleUpdate}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}