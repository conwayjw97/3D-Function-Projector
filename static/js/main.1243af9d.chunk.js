(this["webpackJsonpfunction-projector"]=this["webpackJsonpfunction-projector"]||[]).push([[0],{42:function(e,t,n){},51:function(e,t){},52:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n.n(a),s=n(26),i=n.n(s),o=(n(42),n(14)),c=n(9),l=n(0),d=n(3),h=n(5),u=n(33),p=n(23),g=n(27),x=n(74),v="rgb(255, 255, 255)",b="rgb(25, 207, 41)",j="rgb(35, 151, 235)",f="rgb(199, 24, 24)",m=new h.j({color:v}),R=new h.j({color:b}),O=new h.j({color:j}),w=new h.j({color:f}),y=new h.C(100,-100,-100),C=new h.C(-100,100,-100),N=new h.C(-100,-100,-100),M=new h.C(-100,-100,100),k=function(){function e(t,n,a,r,s,i,o,c){var d=this;Object(l.a)(this,e),this.expression=r,this.axes=s,this.detail=i,this.xRange=[parseInt(o[0][0]),parseInt(o[0][1])],this.yRange=[parseInt(o[1][0]),parseInt(o[1][1])],this.zRange=[parseInt(o[2][0]),parseInt(o[2][1])],this.renderingMethod=c,this.scene=new h.s,this.camera=new h.o(45,n/a,.1,1e3),this.camera.position.set(250,150,250),this.renderer=new h.D({canvas:t,antialias:!0}),this.renderer.setSize(n,a),this.renderer.setClearColor("rgb(40, 44, 52)"),this.controls=new u.a(this.camera,this.renderer.domElement),this.controls.target=new h.C(0,25,0),this.render();!function e(){requestAnimationFrame(e),d.renderer.render(d.scene,d.camera),d.controls.update()}()}return Object(d.a)(e,[{key:"update",value:function(e,t,n,a,r){this.expression===e&&this.axes===t&&this.detail===n&&this.ranges===a&&this.renderingMethod===r||(this.expression=e,this.axes=t,this.detail=n,this.xRange=[parseInt(a[0][0]),parseInt(a[0][1])],this.yRange=[parseInt(a[1][0]),parseInt(a[1][1])],this.zRange=[parseInt(a[2][0]),parseInt(a[2][1])],this.renderingMethod=r,this.scene.remove(this.expressionGroup),this.render())}},{key:"render",value:function(){var e=this.evaluateExpression();if(this.expressionGroup=new h.f,this.axes){this.expressionGroup.add(this.createLine(N,y,R)),this.expressionGroup.add(this.createLine(N,M,O)),this.expressionGroup.add(this.createLine(N,C,w)),this.expressionGroup.add(this.createText("X",6,102.5,-100,-100,b)),this.expressionGroup.add(this.createText("Y",6,-100,-100,102.5,j)),this.expressionGroup.add(this.createText("Z",6,-100,102.5,-100,f));for(var t=new h.C(0,0,0),n=new h.C(0,0,0),a=-80;a<100;a+=20)this.expressionGroup.add(this.createText(this.rangeScale(a,-100,100,this.xRange[0],this.xRange[1]),4,a,-100,-110,b)),this.expressionGroup.add(this.createText(this.rangeScale(a,-100,100,this.yRange[0],this.yRange[1]),4,-110,-100,a,j)),this.expressionGroup.add(this.createText(this.rangeScale(a,-100,100,this.zRange[0],this.zRange[1]),4,-110,a,-110,f)),this.expressionGroup.add(this.createLine(t.set(a,-100,-100),n.set(a,-100,-105),R)),this.expressionGroup.add(this.createLine(t.set(-100,-100,a),n.set(-105,-100,a),O)),this.expressionGroup.add(this.createLine(t.set(-100,a,-100),n.set(-105,a,-105),w))}if("vertices"===this.renderingMethod&&this.expressionGroup.add(this.createExpressionDots(e)),"edges"===this.renderingMethod)for(var r=0;r<e.length;r++)for(var s=0;s<e[r].length;s++){var i=this.createExpressionSquare(e,r,s);null!=i&&this.expressionGroup.add(i)}if("faces"===this.renderingMethod)for(var o=0;o<e.length;o++)for(var c=0;c<e[o].length;c++){var l=this.createExpressionPlane(e,o,c);null!=l&&this.expressionGroup.add(l)}this.scene.add(this.expressionGroup)}},{key:"rangeScale",value:function(e,t,n,a,r){return(e-t)*(r-a)/(n-t)+a}},{key:"evaluateExpression",value:function(){var e=[],t=(this.xRange[1]-this.xRange[0])/this.detail;if(this.expression.includes("x")||this.expression.includes("y"))try{for(var n=this.xRange[0];n<=this.xRange[1];n+=t){for(var a=this.expression.replaceAll("x","("+n+")"),r=[],s=this.yRange[0];s<=this.yRange[1];s+=t){var i=void 0;if(a.includes("y")){var o=a.replaceAll("y","("+s+")");i=Object(x.a)(o)}else i=Object(x.a)(a);if(i>=this.zRange[0]&&i<=this.zRange[1]){var c=this.rangeScale(n,this.xRange[0],this.xRange[1],-100,100),l=this.rangeScale(i,this.zRange[0],this.zRange[1],-100,100),d=this.rangeScale(s,this.yRange[0],this.yRange[1],-100,100);r.push(new h.C(c,l,d))}}r.length>0&&e.push(r)}}catch(u){alert("Error when solving for Z: "+u)}return e}},{key:"createLine",value:function(e,t,n){var a=[e,t],r=(new h.b).setFromPoints(a);return new h.i(r,n)}},{key:"createText",value:function(e,t,n,a,r,s){var i=new g.a(e,t,s);return i.position.x=n,i.position.y=a,i.position.z=r,i.fontFace="Consolas",i}},{key:"createAxisUnit",value:function(e,t,n,a,r){var s=new g.a(e,4,r);return s.position.x=t,s.position.y=n,s.position.z=a,s.fontFace="Consolas",s}},{key:"createExpressionDots",value:function(e){var t=[].concat.apply([],e),n=(new h.b).setFromPoints(t),a=new h.q({color:v,size:.25});return new h.p(n,a)}},{key:"createExpressionSquare",value:function(e,t,n){if(void 0!==e[t+1]){var a=void 0!==e[t+1][n]&&void 0!==e[t+1][n]&&void 0!==e[t+1][n+1]&&void 0!==e[t][n+1],r=void 0!==e[t+1][n]&&void 0!==e[t+1][n+1],s=void 0!==e[t][n+1]&&void 0!==e[t+1][n],i=null;if(a?i=[e[t][n],e[t+1][n],e[t+1][n+1],e[t][n+1],e[t][n]]:r?i=[e[t][n],e[t+1][n],e[t+1][n+1],e[t][n]]:s&&(i=[e[t][n],e[t][n+1],e[t+1][n]]),null!==i){var o=(new h.b).setFromPoints(i);return new h.i(o,m)}}return null}},{key:"createExpressionPlane",value:function(e,t,n){if(void 0!==e[t+1]){var a=void 0!==e[t+1][n]&&void 0!==e[t+1][n+1],r=void 0!==e[t][n+1]&&void 0!==e[t+1][n+1],s=void 0!==e[t][n+1]&&void 0!==e[t+1][n],i=!0,o=(new h.b).setFromPoints([]);if(a){i=!1;var c=[e[t][n],e[t+1][n],e[t+1][n+1]];o=p.a.mergeBufferGeometries([o,(new h.b).setFromPoints(c)])}if(r){i=!1;var l=[e[t][n],e[t][n+1],e[t+1][n+1]];o=p.a.mergeBufferGeometries([o,(new h.b).setFromPoints(l)])}if(i&&s){var d=[e[t][n],e[t][n+1],e[t+1][n]];o=p.a.mergeBufferGeometries([o,(new h.b).setFromPoints(d)])}var u=null;u=void 0!==e[t+1][n+1]?this.getColourForY(e[t][n].y+(e[t+1][n+1].y-e[t][n].y)/2):this.getColourForY(e[t][n].y);var g=new h.n({color:u,side:h.c});return new h.m(o,g)}return null}},{key:"getColourForVector",value:function(e){var t,n;return 0,t=Math.round(2.55*Math.abs(e.z)),n=Math.round(2.55*Math.abs(e.y)),"rgb("+t+","+Math.round(2.55*Math.abs(e.x))+","+n+")"}},{key:"getColourForY",value:function(e){var t,n,a;return t=n=a=0,e>0?(t=Math.round(2.55*e),n=Math.round(255-t)):(a=Math.round(2.55*-e),n=Math.round(255-a)),"rgb("+t+","+n+","+a+")"}}]),e}(),I=(n(52),n(7));var G=function(e){var t=Object(a.useState)(!0),n=Object(c.a)(t,2),r=n[0],s=n[1],i=Object(a.useRef)(null),o=window.innerWidth,l=window.innerHeight,d=Object(a.useRef)(null);return Object(a.useEffect)((function(){s(!0);var t=new k(i.current,o,l,e.expression,e.axes,e.detail,e.ranges,e.renderingMethod);s(!1);d.current={update:function(e,n,a,r,i){s(!0),t.update(e,n,a,r,i),s(!1)}}}),[]),Object(a.useEffect)((function(){d.current.update(e.expression,e.axes,e.detail,e.ranges,e.renderingMethod)}),[e.axes,e.detail,e.renderingMethod,e.updateCount]),Object(I.jsxs)("div",{children:[function(){if(r)return Object(I.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",pointerEvents:"none",margin:"auto",color:"rgb(255, 255, 255)",font:"60px Consolas",transform:"translate(-50%, -50%)"},children:"Loading..."})}(),Object(I.jsx)("canvas",{ref:i,width:o,height:l,className:"canvas",children:Object(I.jsx)("p",{children:"Your browser doesn't support canvas."})})]})},S=n(35);n(72);var E=function(e){var t=Object(a.useState)(!0),n=Object(c.a)(t,2),r=n[0],s=n[1];return Object(I.jsxs)(S.slide,{isOpen:!0,disableAutoFocus:!0,width:375,children:[Object(I.jsx)("label",{className:"centered large-print",children:"Projection"}),Object(I.jsxs)("label",{className:"centered",children:["Z =",Object(I.jsx)("input",{className:"small-left-margin",type:"text",id:"expression",value:e.expression,onChange:e.handleExpressionChange})]}),Object(I.jsxs)("label",{className:"centered",children:["X Range:[",Object(I.jsx)("input",{className:"range-input",type:"text",id:"lowerXRange",value:e.ranges[0][0],onChange:e.handleRangeChange}),",",Object(I.jsx)("input",{className:"range-input",type:"text",id:"upperXRange",value:e.ranges[0][1],onChange:e.handleRangeChange}),"]"]}),Object(I.jsxs)("label",{className:"centered",children:["Y Range:[",Object(I.jsx)("input",{className:"range-input",type:"text",id:"lowerYRange",value:e.ranges[1][0],onChange:e.handleRangeChange}),",",Object(I.jsx)("input",{className:"range-input",type:"text",id:"upperYRange",value:e.ranges[1][1],onChange:e.handleRangeChange}),"]"]}),Object(I.jsxs)("label",{className:"centered",children:["Z Range:[",Object(I.jsx)("input",{className:"range-input",type:"text",id:"lowerZRange",value:e.ranges[2][0],onChange:e.handleRangeChange}),",",Object(I.jsx)("input",{className:"range-input",type:"text",id:"upperZRange",value:e.ranges[2][1],onChange:e.handleRangeChange}),"]"]}),Object(I.jsx)("label",{className:"centered large-print underlined",children:Object(I.jsx)("button",{onClick:e.handleUpdate,children:"Update"})}),Object(I.jsx)("label",{className:"centered large-print",children:"Graphics"}),Object(I.jsxs)("label",{className:"centered",children:["Axes:",Object(I.jsx)("input",{id:"axis-checkbox",type:"checkbox",defaultChecked:!0,onChange:e.handleAxesChange})]}),Object(I.jsxs)("label",{className:"centered",children:["Render Method:",Object(I.jsxs)("select",{className:"small-left-margin",id:"render-method-dropdown",value:e.renderingMethod,onChange:function(t){e.handleRenderingMethodChange(t),"vertices"===t.target.value?s(!1):s(!0)},children:[Object(I.jsx)("option",{value:"vertices",children:"Vertices"}),Object(I.jsx)("option",{value:"edges",children:"Edges"}),Object(I.jsx)("option",{value:"faces",children:"Faces"})]})]}),Object(I.jsxs)("label",{className:"centered",children:["Max Vertices:",Object(I.jsx)("input",{type:"range",disabled:r,id:"detail",name:"detail",min:"10",max:"100",value:e.detail,onChange:e.handleDetailChange}),e.detail*e.detail]}),Object(I.jsx)("label",{className:"centered underlined",children:"Max Vertices slider can only be used with the Vertices rendering method."}),Object(I.jsx)("label",{className:"centered large-print",children:"Camera"}),Object(I.jsx)("label",{className:"centered underlined",children:"Left click and hold to rotate the camera around the projection. Right click and hold to move the camera sideways. Scroll or hold middle mouse to move the camera forwards or backwards."})]})};var F=function(){var e=Object(a.useState)(0),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(50),i=Object(c.a)(s,2),l=i[0],d=i[1],h=Object(a.useState)("x^2 + y^2"),u=Object(c.a)(h,2),p=u[0],g=u[1],v=Object(a.useState)([["-100","100"],["-100","100"],["0","20000"]]),b=Object(c.a)(v,2),j=b[0],f=b[1],m=Object(a.useState)(!0),R=Object(c.a)(m,2),O=R[0],w=R[1],y=Object(a.useState)("faces"),C=Object(c.a)(y,2),N=C[0],M=C[1];return Object(a.useEffect)((function(){document.title="Function Projector"}),[]),Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)(G,{detail:l,expression:p,ranges:j,axes:O,renderingMethod:N,updateCount:n}),Object(I.jsx)(E,{detail:l,handleDetailChange:function(e){d(e.target.value)},expression:p,handleExpressionChange:function(e){g(e.target.value)},ranges:j,handleRangeChange:function(e){var t=Object(o.a)(j);switch(e.target.id){case"lowerXRange":t[0][0]=e.target.value;break;case"upperXRange":t[0][1]=e.target.value;break;case"lowerYRange":t[1][0]=e.target.value;break;case"upperYRange":t[1][1]=e.target.value;break;case"lowerZRange":t[2][0]=e.target.value;break;case"upperZRange":t[2][1]=e.target.value}f(t)},handleAxesChange:function(e){w(e.target.checked)},renderingMethod:N,handleRenderingMethodChange:function(e){M(e.target.value)},handleUpdate:function(){try{var e=p.replaceAll("x","(1)").replaceAll("y","(1)");Object(x.a)(e)}catch(t){alert("Error when solving for Z: "+t)}isNaN(parseInt(j[0][0]))?alert("Lower X Range invalid"):isNaN(parseInt(j[0][1]))?alert("Upper X Range invalid"):isNaN(parseInt(j[1][0]))?alert("Lower Y Range invalid"):isNaN(parseInt(j[1][1]))?alert("Upper Y Range invalid"):isNaN(parseInt(j[2][0]))?alert("Lower Z Range invalid"):isNaN(parseInt(j[2][1]))?alert("Upper Z Range invalid"):parseInt(j[0][0])>parseInt(j[0][1])?alert("Lower X Range must be less than Upper X Range."):parseInt(j[1][0])>parseInt(j[1][1])?alert("Lower Y Range must be less than Upper Y Range."):parseInt(j[2][0])>parseInt(j[2][1])?alert("Lower Z Range must be less than Upper Z Range."):r(n+1)}})]})};i.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(F,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.1243af9d.chunk.js.map